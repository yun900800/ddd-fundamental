# 如何设计一个存储聚合的存储库?

1. 理解存储库(Repository)和DAO有啥区别?
2. 为什么存储库会采用WorkOfUnit的设计模式来存储聚合,这样设计的好处是什么?
3. 如果领域模型涉及到继承关系,这里的继承分为数据继承和行为继承,在这两种情况下应该如何设计存储库?
4. 如果需要对领域模型进行验证,如果采用规约设计模式来简化验证的通用流程?
5. 基类的领域模型应该如何结合Specification pattern来设计一个可以验证的领域模型?
6. 增加对这个模块的单元测试
7. 为什么在存储聚合的时候，一个事务只修改一个聚合?这样设计的好处是什么?
8. 在用规约设计进行领域模型验证的时候,测试部分需要返回值还是直接通过异常来抛出?
9. 单元测试有哪些指导原则:
    - 有测试总比没测试好
    - 测试尽可能的小而快
    - 使测试自动化
    - 进行代码覆盖检测
    - 在写任何新的实现代码或测试代码之前，先修复所有运行失败的测试
    - 再简单的代码也需要测试
    - 特别注意输入参数的边界案例
    - 不要只测试正常流程，还要测试可选和例外流程
    - 对于每一个报告的Bug，写一个对应的测试用例，方便回归测试
    - 时刻注意，所有测试都通过，不代表程序就真的100%没问题，测试永远只是辅助
    - 隔离是很重要的一环,因此在这里可以说有Mockito进行;自动化是为了提高效率;一个测试方法一定只有一个关注点
